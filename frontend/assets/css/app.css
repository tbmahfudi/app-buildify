@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   CSS CUSTOM PROPERTIES (VARIABLES)
   ============================================ */

:root {
  /* Light Theme Colors (Default) */
  --color-primary: #2563eb;
  --color-primary-hover: #1d4ed8;
  --color-secondary: #6c757d;

  --color-bg-main: #f8fafc;
  --color-bg-sidebar: rgba(15, 23, 42, 0.82);
  --color-bg-header: rgba(15, 23, 42, 0.65);
  --color-bg-content: rgba(15, 23, 42, 0.2);
  --color-bg-card: #ffffff;
  --color-bg-card-hover: #f1f5f9;

  --color-text-primary: #0f172a;
  --color-text-secondary: #64748b;
  --color-text-tertiary: #94a3b8;
  --color-text-inverse: #ffffff;

  --color-border: rgba(148, 163, 184, 0.2);
  --color-border-light: rgba(148, 163, 184, 0.1);

  /* Spacing Scale (for density modes) */
  --spacing-scale: 1;

  /* Computed spacing values */
  --spacing-xs: calc(0.25rem * var(--spacing-scale));
  --spacing-sm: calc(0.5rem * var(--spacing-scale));
  --spacing-md: calc(0.75rem * var(--spacing-scale));
  --spacing-lg: calc(1rem * var(--spacing-scale));
  --spacing-xl: calc(1.5rem * var(--spacing-scale));
  --spacing-2xl: calc(2rem * var(--spacing-scale));

  /* Border radius scale */
  --radius-sm: calc(0.5rem * var(--spacing-scale));
  --radius-md: calc(0.75rem * var(--spacing-scale));
  --radius-lg: calc(1rem * var(--spacing-scale));

  /* Font sizes scale */
  --font-scale: 1;
  --font-xs: calc(0.75rem * var(--font-scale));
  --font-sm: calc(0.875rem * var(--font-scale));
  --font-base: calc(1rem * var(--font-scale));
  --font-lg: calc(1.125rem * var(--font-scale));
  --font-xl: calc(1.25rem * var(--font-scale));
}

/* ============================================
   DARK THEME
   ============================================ */

[data-theme="dark"] {
  /* Dark Theme Colors */
  --color-bg-main: #0f172a;
  --color-bg-sidebar: rgba(15, 23, 42, 0.95);
  --color-bg-header: rgba(15, 23, 42, 0.85);
  --color-bg-content: rgba(15, 23, 42, 0.4);
  --color-bg-card: #1e293b;
  --color-bg-card-hover: #334155;

  --color-text-primary: #f1f5f9;
  --color-text-secondary: #cbd5e1;
  --color-text-tertiary: #94a3b8;
  --color-text-inverse: #0f172a;

  --color-border: rgba(148, 163, 184, 0.15);
  --color-border-light: rgba(148, 163, 184, 0.08);
}

/* Dark theme body and main elements */
[data-theme="dark"] body {
  background: linear-gradient(135deg, #0f172a, #1e293b);
  color: var(--color-text-primary);
}

[data-theme="dark"] .app-shell {
  background: linear-gradient(135deg, rgba(15, 23, 42, 0.98), rgba(30, 41, 59, 0.95));
}

[data-theme="dark"] .app-content {
  background: linear-gradient(135deg, rgba(15, 23, 42, 0.3), rgba(30, 41, 59, 0.4));
}

[data-theme="dark"] #content {
  background-color: transparent !important;
}

/* Dark theme sidebar footer (copyright area) */
[data-theme="dark"] .sidebar-footer {
  background: rgba(15, 23, 42, 0.98);
  border-top-color: rgba(148, 163, 184, 0.15);
}

[data-theme="dark"] .sidebar-footer-title {
  color: var(--color-text-primary);
}

[data-theme="dark"] .sidebar-footer-subtitle {
  color: var(--color-text-tertiary);
}

/* Dark theme cards and components */
[data-theme="dark"] .bg-white {
  background-color: var(--color-bg-card) !important;
}

[data-theme="dark"] .bg-gray-50,
[data-theme="dark"] .bg-gray-100 {
  background-color: rgba(30, 41, 59, 0.5) !important;
}

[data-theme="dark"] .text-gray-900 {
  color: var(--color-text-primary) !important;
}

[data-theme="dark"] .text-gray-700 {
  color: var(--color-text-secondary) !important;
}

[data-theme="dark"] .text-gray-600 {
  color: var(--color-text-tertiary) !important;
}

[data-theme="dark"] .text-gray-500 {
  color: var(--color-text-tertiary) !important;
}

[data-theme="dark"] .border-gray-200,
[data-theme="dark"] .border-gray-300 {
  border-color: var(--color-border) !important;
}

/* Dark theme form inputs */
[data-theme="dark"] input,
[data-theme="dark"] select,
[data-theme="dark"] textarea {
  background-color: rgba(15, 23, 42, 0.5) !important;
  border-color: var(--color-border) !important;
  color: var(--color-text-primary) !important;
}

[data-theme="dark"] input:focus,
[data-theme="dark"] select:focus,
[data-theme="dark"] textarea:focus {
  border-color: var(--color-primary) !important;
  background-color: rgba(15, 23, 42, 0.7) !important;
}

/* Dark theme buttons */
[data-theme="dark"] button:not(.bg-blue-600):not(.bg-red-600):not(.bg-green-600) {
  background-color: rgba(148, 163, 184, 0.1);
  color: var(--color-text-primary);
}

/* ============================================
   DENSITY MODES
   ============================================ */

/* Comfortable Mode (1.25x spacing) */
body.density-comfortable {
  --spacing-scale: 1.25;
  --font-scale: 1.1;
}

body.density-comfortable .app-sidebar {
  width: 320px;
}

body.density-comfortable .app-header {
  padding: calc(1.5rem * 1.25) calc(2rem * 1.25);
}

body.density-comfortable .app-content {
  padding: calc(1.75rem * 1.25);
}

body.density-comfortable .nav-link {
  padding: calc(0.75rem * 1.25);
  margin-bottom: calc(0.25rem * 1.25);
}

body.density-comfortable .nav-icon {
  width: calc(40px * 1.15);
  height: calc(40px * 1.15);
  font-size: calc(1.15rem * 1.15);
}

body.density-comfortable .sidebar-inner {
  padding: calc(1.5rem * 1.25) calc(1.25rem * 1.25);
}

/* Normal Mode (1x spacing - default) */
body.density-normal {
  --spacing-scale: 1;
  --font-scale: 1;
}

/* Compact Mode (0.6x spacing - minimal) */
body.density-compact {
  --spacing-scale: 0.6;
  --font-scale: 0.85;
}

body.density-compact .app-sidebar {
  width: 200px;
}

body.density-compact .app-header {
  padding: calc(1rem * 0.6) calc(1.25rem * 0.6);
}

body.density-compact .app-content {
  padding: calc(1rem * 0.6);
}

body.density-compact .nav-link {
  padding: calc(0.5rem * 0.6);
  margin-bottom: 0;
  gap: calc(0.5rem * 0.6);
}

body.density-compact .nav-icon {
  width: calc(36px * 0.8);
  height: calc(36px * 0.8);
  font-size: calc(1rem * 0.85);
  border-radius: calc(10px * 0.8);
}

body.density-compact .nav-label {
  font-size: calc(0.85rem * 0.85);
}

body.density-compact .sidebar-inner {
  padding: calc(1rem * 0.6) calc(0.75rem * 0.6);
}

body.density-compact .sidebar-header {
  margin-bottom: calc(1.5rem * 0.6);
  gap: calc(0.6rem);
}

body.density-compact .brand {
  gap: calc(0.6rem);
}

body.density-compact .brand-logo {
  width: calc(36px * 0.8);
  height: calc(36px * 0.8);
  font-size: calc(0.95rem * 0.85);
  border-radius: calc(10px * 0.8);
}

body.density-compact .brand-title {
  font-size: calc(0.85rem * 0.85);
}

body.density-compact .brand-subtitle {
  font-size: calc(0.7rem * 0.85);
}

body.density-compact .header-logo {
  width: calc(38px * 0.8);
  height: calc(38px * 0.8);
}

body.density-compact .sidebar-toggle,
body.density-compact .submenu-item {
  width: calc(36px * 0.8);
  height: calc(36px * 0.8);
  font-size: calc(1rem * 0.85);
  border-radius: calc(12px * 0.8);
}

body.density-compact .user-menu-button {
  padding: calc(0.35rem * 0.6) calc(0.7rem * 0.6);
  gap: calc(0.5rem);
  font-size: calc(0.8rem);
}

body.density-compact .user-avatar {
  width: calc(28px);
  height: calc(28px);
  font-size: calc(0.7rem);
}

body.density-compact .user-name {
  font-size: calc(0.8rem);
}

/* Compact mode for cards and content */
body.density-compact .bg-white,
body.density-compact .bg-gray-50 {
  padding: calc(1rem * 0.6) !important;
}

body.density-compact h1,
body.density-compact .text-2xl {
  font-size: calc(1.5rem * 0.85) !important;
}

body.density-compact h2,
body.density-compact .text-xl {
  font-size: calc(1.25rem * 0.85) !important;
}

body.density-compact h3,
body.density-compact .text-lg {
  font-size: calc(1.125rem * 0.85) !important;
}

body.density-compact p,
body.density-compact .text-base {
  font-size: calc(0.9rem * 0.85) !important;
}

body.density-compact .text-sm {
  font-size: calc(0.8rem * 0.85) !important;
}

body.density-compact .text-xs {
  font-size: calc(0.7rem * 0.85) !important;
}

/* Compact mode for form elements */
body.density-compact input,
body.density-compact select,
body.density-compact textarea {
  padding: calc(0.4rem * 0.6) calc(0.75rem * 0.6) !important;
  font-size: calc(0.875rem * 0.85) !important;
}

body.density-compact button {
  padding: calc(0.4rem * 0.6) calc(1rem * 0.6) !important;
  font-size: calc(0.875rem * 0.85) !important;
}

body.density-compact label {
  font-size: calc(0.85rem * 0.85) !important;
  margin-bottom: calc(0.35rem) !important;
}

/* Compact mode for spacing utilities */
body.density-compact .space-y-6 > * + *,
body.density-compact .space-y-5 > * + *,
body.density-compact .space-y-4 > * + * {
  margin-top: calc(0.75rem * 0.6) !important;
}

body.density-compact .space-y-3 > * + * {
  margin-top: calc(0.5rem * 0.6) !important;
}

body.density-compact .space-y-2 > * + * {
  margin-top: calc(0.35rem * 0.6) !important;
}

body.density-compact .gap-6,
body.density-compact .gap-5 {
  gap: calc(0.75rem * 0.6) !important;
}

body.density-compact .gap-4,
body.density-compact .gap-3 {
  gap: calc(0.5rem * 0.6) !important;
}

body.density-compact .gap-2 {
  gap: calc(0.35rem * 0.6) !important;
}

/* Compact mode for margins and padding */
body.density-compact .p-6,
body.density-compact .p-5 {
  padding: calc(1rem * 0.6) !important;
}

body.density-compact .p-4 {
  padding: calc(0.75rem * 0.6) !important;
}

body.density-compact .p-3 {
  padding: calc(0.5rem * 0.6) !important;
}

body.density-compact .p-2 {
  padding: calc(0.35rem * 0.6) !important;
}

body.density-compact .px-6,
body.density-compact .px-5 {
  padding-left: calc(1rem * 0.6) !important;
  padding-right: calc(1rem * 0.6) !important;
}

body.density-compact .px-4 {
  padding-left: calc(0.75rem * 0.6) !important;
  padding-right: calc(0.75rem * 0.6) !important;
}

body.density-compact .py-3,
body.density-compact .py-2 {
  padding-top: calc(0.4rem * 0.6) !important;
  padding-bottom: calc(0.4rem * 0.6) !important;
}

body.density-compact .m-6,
body.density-compact .m-5 {
  margin: calc(1rem * 0.6) !important;
}

body.density-compact .mb-6,
body.density-compact .mb-5,
body.density-compact .mb-4 {
  margin-bottom: calc(0.75rem * 0.6) !important;
}

body.density-compact .mb-3,
body.density-compact .mb-2 {
  margin-bottom: calc(0.35rem * 0.6) !important;
}

body.density-compact .mt-4,
body.density-compact .mt-3 {
  margin-top: calc(0.5rem * 0.6) !important;
}

/* Compact mode for rounded corners */
body.density-compact .rounded-lg {
  border-radius: calc(0.5rem * 0.7) !important;
}

body.density-compact .rounded-md {
  border-radius: calc(0.375rem * 0.7) !important;
}

/* Compact mode for shadows - reduce to minimal */
body.density-compact .shadow-lg,
body.density-compact .shadow-md {
  box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1) !important;
}

body.density-compact .shadow-sm {
  box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05) !important;
}

/* ============================================
   EXISTING STYLES
   ============================================ */

body {
  min-height: 100vh;
  font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
}

.app-shell {
  display: grid;
  grid-template-columns: auto 1fr;
  background: linear-gradient(135deg, rgba(15, 23, 42, 0.96), rgba(30, 41, 59, 0.9));
}

.app-sidebar {
  position: relative;
  width: 280px;
  background: rgba(15, 23, 42, 0.82);
  backdrop-filter: blur(12px);
  border-right: 1px solid rgba(148, 163, 184, 0.12);
  display: flex;
  flex-direction: column;
  transition: width 0.3s ease;
  overflow: hidden;
}

.sidebar-inner {
  padding: 1.5rem 1.25rem;
  flex: 1;
  overflow-y: auto;
}

.sidebar-header {
  display: flex;
  align-items: center;
  gap: 0.85rem;
  margin-bottom: 2rem;
}

.sidebar-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 42px;
  height: 42px;
  border-radius: 12px;
  background: rgba(148, 163, 184, 0.08);
  color: rgb(226, 232, 240);
  font-size: 1.15rem;
  transition: background-color 0.2s ease, color 0.2s ease;
}

.sidebar-toggle:hover {
  background: rgba(148, 163, 184, 0.18);
  color: #fff;
}

.brand {
  display: flex;
  align-items: center;
  gap: 0.85rem;
}

.brand-logo {
  width: 44px;
  height: 44px;
  border-radius: 12px;
  background: linear-gradient(135deg, #2563eb, #38bdf8);
  display: grid;
  place-items: center;
  font-weight: 700;
  font-size: 1.1rem;
  letter-spacing: 0.1em;
  color: #fff;
  text-transform: uppercase;
}

.brand-text {
  display: flex;
  flex-direction: column;
}

.brand-title {
  font-size: 0.85rem;
  font-weight: 600;
  color: rgb(226, 232, 240);
}

.brand-subtitle {
  font-size: 0.65rem;
  color: rgba(148, 163, 184, 0.85);
}

.sidebar-nav {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.nav-link {
  position: relative;
  display: grid;
  grid-template-columns: 1fr;
  padding: 0.75rem;
  border-radius: 14px;
  color: rgba(226, 232, 240, 0.85);
  background: transparent;
  transition: background-color 0.25s ease, color 0.25s ease, transform 0.25s ease;
  gap: 0.5rem;
}

.nav-link-content {
  display: flex;
  align-items: center;
  gap: 0.85rem;
}

.nav-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: 12px;
  background: rgba(59, 130, 246, 0.08);
  color: rgba(59, 130, 246, 0.95);
  font-size: 1rem;
}

.nav-label {
  font-size: 0.85rem;
  font-weight: 500;
}

.nav-link:hover,
.nav-link:focus {
  background: rgba(59, 130, 246, 0.12);
  color: #fff;
  outline: none;
  transform: translateX(4px);
}

.nav-link.active {
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.35), rgba(37, 99, 235, 0.45));
  color: #fff;
  box-shadow: 0 12px 24px rgba(37, 99, 235, 0.25);
}

.nav-link.active .nav-icon {
  background: rgba(59, 130, 246, 0.2);
  color: #fff;
}

.sidebar-footer {
  padding: 1.5rem;
  background: rgba(15, 23, 42, 0.92);
  border-top: 1px solid rgba(148, 163, 184, 0.12);
  text-align: center;
}

.sidebar-footer-title {
  font-size: 0.75rem;
  font-weight: 600;
  color: rgb(226, 232, 240);
}

.sidebar-footer-subtitle {
  font-size: 0.65rem;
  color: rgba(148, 163, 184, 0.85);
}

.app-main {
  display: flex;
  flex-direction: column;
  min-width: 0;
}

.app-header {
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  padding: 1.5rem 2rem;
  border-bottom: 1px solid rgba(148, 163, 184, 0.1);
  background: rgba(15, 23, 42, 0.65);
  backdrop-filter: blur(16px);
  gap: 1.25rem;
}

.header-left {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.header-logo {
  width: 46px;
  height: 46px;
  border-radius: 14px;
  background: linear-gradient(135deg, #38bdf8, #2563eb);
  display: grid;
  place-items: center;
  font-weight: 700;
  letter-spacing: 0.1em;
}

.header-title-group {
  display: flex;
  flex-direction: column;
}

.header-title {
  font-size: 1rem;
  font-weight: 600;
}

.header-subtitle {
  font-size: 0.75rem;
  color: rgba(148, 163, 184, 0.85);
}

.floating-submenu {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 0.75rem;
}

.submenu-item {
  position: relative;
  width: 42px;
  height: 42px;
  border-radius: 14px;
  background: rgba(148, 163, 184, 0.12);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: rgba(226, 232, 240, 0.9);
  transition: background-color 0.2s ease, color 0.2s ease, transform 0.2s ease;
}

.submenu-item:hover,
.submenu-item:focus {
  background: rgba(59, 130, 246, 0.3);
  color: #fff;
  transform: translateY(-2px);
  outline: none;
}

.submenu-item.active {
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.65), rgba(37, 99, 235, 0.75));
  color: #fff;
  box-shadow: 0 8px 18px rgba(37, 99, 235, 0.25);
}

.submenu-item::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: calc(100% + 0.5rem);
  left: 50%;
  transform: translateX(-50%);
  background: rgba(15, 23, 42, 0.95);
  padding: 0.35rem 0.65rem;
  border-radius: 0.5rem;
  color: #fff;
  font-size: 0.7rem;
  letter-spacing: 0.02em;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease;
  white-space: nowrap;
}

.submenu-item:hover::after,
.submenu-item:focus::after {
  opacity: 1;
}

.header-actions {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.user-menu {
  position: relative;
}

.user-menu-button {
  display: inline-flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.45rem 0.9rem;
  border-radius: 999px;
  background: rgba(148, 163, 184, 0.14);
  color: rgba(226, 232, 240, 0.95);
  transition: background-color 0.2s ease, color 0.2s ease;
}

.user-menu-button:hover,
.user-menu-button:focus {
  background: rgba(59, 130, 246, 0.25);
  color: #fff;
  outline: none;
}

.user-avatar {
  width: 32px;
  height: 32px;
  border-radius: 999px;
  background: linear-gradient(135deg, rgba(37, 99, 235, 0.95), rgba(59, 130, 246, 0.95));
  display: grid;
  place-items: center;
  font-size: 0.75rem;
  font-weight: 600;
  letter-spacing: 0.05em;
}

.user-name {
  font-size: 0.85rem;
  font-weight: 500;
}

.user-menu-dropdown {
  position: absolute;
  right: 0;
  top: calc(100% + 0.75rem);
  min-width: 200px;
  background: rgba(15, 23, 42, 0.98);
  border-radius: 16px;
  border: 1px solid rgba(148, 163, 184, 0.15);
  padding: 0.75rem;
  box-shadow: 0 24px 48px rgba(15, 23, 42, 0.35);
  display: grid;
  gap: 0.35rem;
  z-index: 40;
}

.user-menu-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.55rem 0.65rem;
  border-radius: 12px;
  color: rgba(226, 232, 240, 0.95);
  text-decoration: none;
  font-size: 0.85rem;
  transition: background-color 0.2s ease, color 0.2s ease;
}

.user-menu-item:hover,
.user-menu-item:focus {
  background: rgba(59, 130, 246, 0.22);
  color: #fff;
  outline: none;
}

.user-menu-danger {
  color: rgba(248, 113, 113, 0.95);
}

.user-menu-danger:hover,
.user-menu-danger:focus {
  background: rgba(248, 113, 113, 0.18);
  color: rgb(254, 226, 226);
}

.user-menu-separator {
  border: none;
  border-top: 1px solid rgba(148, 163, 184, 0.12);
  margin: 0.25rem 0;
}

.app-content {
  flex: 1;
  overflow-y: auto;
  padding: 1.75rem;
  background: linear-gradient(135deg, rgba(15, 23, 42, 0.2), rgba(30, 41, 59, 0.35));
}

body.sidebar-collapsed .app-sidebar {
  width: 88px;
}

body.sidebar-collapsed .brand-text,
body.sidebar-collapsed .sidebar-footer,
body.sidebar-collapsed .nav-label {
  display: none;
}

body.sidebar-collapsed .sidebar-inner {
  padding-left: 0.9rem;
  padding-right: 0.9rem;
}

body.sidebar-collapsed .brand-logo {
  margin-inline: auto;
}

body.sidebar-collapsed .sidebar-header {
  justify-content: center;
}

body.sidebar-collapsed .nav-link {
  padding: 0.9rem 0.75rem;
  justify-items: center;
}

body.sidebar-collapsed .nav-link-content {
  justify-content: center;
}

body.sidebar-collapsed .nav-icon {
  width: 48px;
  height: 48px;
}

body.sidebar-collapsed .nav-link::after {
  content: attr(data-tooltip);
  position: absolute;
  left: calc(100% + 0.75rem);
  top: 50%;
  transform: translateY(-50%);
  background: rgba(15, 23, 42, 0.95);
  border-radius: 0.65rem;
  padding: 0.45rem 0.75rem;
  color: #fff;
  font-size: 0.75rem;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease;
  box-shadow: 0 12px 24px rgba(15, 23, 42, 0.35);
}

body.sidebar-collapsed .nav-link:hover::after,
body.sidebar-collapsed .nav-link:focus::after {
  opacity: 1;
}

.login-card {
  @apply max-w-sm mx-auto;
  margin-top: 10vh;
}

/* Audit widget specific styles */
.audit-timeline {
  position: relative;
}

.audit-item {
  position: relative;
}

.audit-changes details summary {
  list-style: none;
}

.audit-changes details summary::-webkit-details-marker {
  display: none;
}

/* ============================================
   THEME & DENSITY UTILITY CLASSES
   ============================================ */

/* Smooth transitions for theme changes */
body,
.app-shell,
.app-sidebar,
.app-header,
.app-content,
.bg-white,
input,
select,
textarea,
button {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

/* Typography with density-aware sizing */
.text-responsive-sm {
  font-size: var(--font-sm);
}

.text-responsive-base {
  font-size: var(--font-base);
}

.text-responsive-lg {
  font-size: var(--font-lg);
}

.text-responsive-xl {
  font-size: var(--font-xl);
}

/* Spacing utilities with density support */
.spacing-responsive {
  padding: var(--spacing-lg);
}

.spacing-responsive-x {
  padding-left: var(--spacing-lg);
  padding-right: var(--spacing-lg);
}

.spacing-responsive-y {
  padding-top: var(--spacing-lg);
  padding-bottom: var(--spacing-lg);
}

/* Border radius with density support */
.radius-responsive-sm {
  border-radius: var(--radius-sm);
}

.radius-responsive-md {
  border-radius: var(--radius-md);
}

.radius-responsive-lg {
  border-radius: var(--radius-lg);
}

/* Theme-aware text colors */
.text-theme-primary {
  color: var(--color-text-primary);
}

.text-theme-secondary {
  color: var(--color-text-secondary);
}

.text-theme-tertiary {
  color: var(--color-text-tertiary);
}

/* Theme-aware backgrounds */
.bg-theme-card {
  background-color: var(--color-bg-card);
}

.bg-theme-card:hover {
  background-color: var(--color-bg-card-hover);
}

/* Theme-aware borders */
.border-theme {
  border-color: var(--color-border);
}

.border-theme-light {
  border-color: var(--color-border-light);
}

/* Dark theme table styling */
[data-theme="dark"] table {
  color: var(--color-text-primary);
}

[data-theme="dark"] thead {
  background-color: rgba(15, 23, 42, 0.4);
}

[data-theme="dark"] tbody tr:hover {
  background-color: rgba(59, 130, 246, 0.08);
}

[data-theme="dark"] th,
[data-theme="dark"] td {
  border-color: var(--color-border);
}

/* Dark theme hover states */
[data-theme="dark"] .hover\:bg-gray-50:hover,
[data-theme="dark"] .hover\:bg-gray-100:hover {
  background-color: rgba(148, 163, 184, 0.1) !important;
}

[data-theme="dark"] .hover\:bg-blue-50:hover {
  background-color: rgba(59, 130, 246, 0.15) !important;
}

/* Animation for density transitions */
.density-transition {
  transition: width 0.3s ease, padding 0.3s ease, margin 0.3s ease, font-size 0.2s ease;
}

/* Apply density transitions to key elements */
.app-sidebar,
.app-header,
.app-content,
.nav-link,
.nav-icon,
.sidebar-inner,
.brand-logo,
.header-logo {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Ensure proper text rendering across densities */
body.density-comfortable {
  line-height: 1.65;
  letter-spacing: 0.01em;
}

body.density-normal {
  line-height: 1.5;
  letter-spacing: normal;
}

body.density-compact {
  line-height: 1.35;
  letter-spacing: -0.015em;
}

/* Additional compact optimizations */
body.density-compact table {
  font-size: calc(0.85rem * 0.85);
}

body.density-compact th,
body.density-compact td {
  padding: calc(0.5rem * 0.6) calc(0.75rem * 0.6) !important;
}

body.density-compact .sidebar-nav {
  gap: 0;
}

/* ============================================
   NAVBAR - CONSISTENTLY SMALL ACROSS ALL THEMES
   ============================================ */

/* Base navbar styles - keep small */
.navbar {
  padding: 0.5rem 1rem !important;
}

/* Override density mode padding for navbar */
body.density-comfortable .navbar,
body.density-normal .navbar,
body.density-compact .navbar {
  padding: 0.5rem 1rem !important;
}

/* Ensure navbar elements stay small in all density modes */
body.density-comfortable .navbar,
body.density-normal .navbar,
body.density-compact .navbar {
  font-size: 0.875rem !important;
}

/* Keep navbar buttons small in all modes */
body.density-comfortable .navbar button,
body.density-normal .navbar button,
body.density-compact .navbar button {
  padding: 0.375rem 0.75rem !important;
  font-size: 0.875rem !important;
}

/* Keep navbar icons small */
body.density-comfortable .navbar svg,
body.density-normal .navbar svg,
body.density-compact .navbar svg {
  width: 1rem !important;
  height: 1rem !important;
}

/* Keep navbar logo small */
body.density-comfortable .navbar > div > div:first-child > div,
body.density-normal .navbar > div > div:first-child > div,
body.density-compact .navbar > div > div:first-child > div {
  width: 1.5rem !important;
  height: 1.5rem !important;
}

/* Keep navbar gaps small */
body.density-comfortable .navbar .gap-2,
body.density-normal .navbar .gap-2,
body.density-compact .navbar .gap-2 {
  gap: 0.5rem !important;
}

/* ============================================
   SIDEBAR COLLAPSE FUNCTIONALITY
   ============================================ */

/* Collapsed sidebar */
.sidebar-collapsed {
  width: 80px !important;
  min-width: 80px !important;
}

/* Hide menu labels when sidebar is collapsed */
.sidebar-collapsed .sidebar-menu-label,
.sidebar-collapsed .sidebar-footer-content {
  display: none !important;
}

/* Show collapsed footer when sidebar is collapsed */
.sidebar-collapsed .sidebar-footer-collapsed {
  display: block !important;
}

/* Tooltip styles for collapsed sidebar */
.sidebar-tooltip {
  position: absolute;
  left: 100%;
  top: 50%;
  transform: translateY(-50%);
  margin-left: 0.5rem;
  padding: 0.5rem 0.75rem;
  background-color: #1f2937;
  color: #ffffff;
  font-size: 0.875rem;
  border-radius: 0.5rem;
  white-space: nowrap;
  z-index: 9999;
  pointer-events: none;
  box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
}

/* Popup menu for collapsed submenu items */
.submenu-popup {
  position: absolute;
  left: 100%;
  top: 0;
  margin-left: 0.5rem;
  min-width: 220px;
  background-color: #ffffff;
  border: 1px solid #e5e7eb;
  border-radius: 0.75rem;
  box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
  z-index: 9999;
  overflow: hidden;
}

.submenu-popup::before {
  content: '';
  position: absolute;
  left: -8px;
  top: 12px;
  width: 0;
  height: 0;
  border-top: 8px solid transparent;
  border-bottom: 8px solid transparent;
  border-right: 8px solid #e5e7eb;
}

.submenu-popup::after {
  content: '';
  position: absolute;
  left: -6px;
  top: 12px;
  width: 0;
  height: 0;
  border-top: 8px solid transparent;
  border-bottom: 8px solid transparent;
  border-right: 8px solid #ffffff;
}

/* Center menu items when sidebar is collapsed */
.sidebar-collapsed .sidebar-menu-item {
  justify-content: center;
  padding-left: 0;
  padding-right: 0;
}

/* Hide submenu arrow when sidebar is collapsed */
.sidebar-collapsed .submenu-arrow {
  display: none !important;
}

/* Adjust sidebar footer when collapsed */
.sidebar-collapsed .sidebar-footer {
  padding: 1rem 0.5rem;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* Allow sidebar footer to show tooltips outside bounds */
.sidebar-footer {
  overflow: visible;
  position: relative;
}

/* Smooth transitions */
.sidebar {
  transition: width 0.3s ease-in-out, min-width 0.3s ease-in-out;
  z-index: 1000;
  overflow: visible;
}

/* Allow sidebar to show tooltips and popups outside bounds */
.sidebar-content {
  position: relative;
}

/* Ensure main content is below sidebar and tooltips */
#content {
  position: relative;
  z-index: 1;
}

.sidebar-menu-label,
.sidebar-footer-content {
  transition: opacity 0.2s ease-in-out;
}

/* Hover effects for collapsed menu items */
.sidebar-collapsed .sidebar-menu-item:hover {
  background-color: #f3f4f6;
  position: relative;
  z-index: 10000;
}

/* Ensure menu items with tooltips are positioned correctly */
.sidebar-menu-item {
  position: relative;
}

/* Active state for collapsed menu items */
.sidebar-collapsed .sidebar-menu-item.bg-blue-50 {
  background-color: #eff6ff;
  color: #2563eb;
}

/* Icon colors */
.sidebar-menu-item i {
  color: currentColor;
}

/* Phosphor icon duotone colors */
.ph-duotone {
  --ph-duotone-primary-opacity: 0.2;
}

/* ============================================
   SIDEBAR COLLAPSE BUTTON
   ============================================ */

/* Collapse button styling */
.sidebar-collapse-button {
  position: absolute;
  bottom: 5rem;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10;
}

/* Hide collapse button when sidebar is collapsed */
.sidebar-collapsed .sidebar-collapse-button {
  left: 50%;
  transform: translateX(-50%);
}

/* Rotate icon on hover for visual feedback */
.sidebar-collapse-button:hover i {
  transform: scale(1.1);
}

/* Tooltip for collapse button */
.sidebar-collapse-tooltip {
  position: absolute;
  left: 100%;
  top: 50%;
  transform: translateY(-50%);
  margin-left: 0.5rem;
  pointer-events: none;
}

/* Hide tooltip when sidebar is collapsed (will use existing tooltip system) */
.sidebar-collapsed .sidebar-collapse-tooltip {
  display: block !important;
}

/* Footer tooltip styling */
.sidebar-footer-tooltip {
  pointer-events: none;
  line-height: 1.6;
}
